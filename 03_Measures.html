<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Prof. Dr. Juanjo Manjarín" />


<title>Measures in Networks</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Social Media Analytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Social Media Analytics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Unit I</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="01_NetworkData.html">Networks and their Data Sets</a>
        </li>
        <li>
          <a href="02_MathNet.html">Mathematical Description of Networks</a>
        </li>
        <li>
          <a href="03_Measures.html">Measures in Networks</a>
        </li>
        <li>
          <a href="04_RBasics.html">Basics of `igraph`</a>
        </li>
        <li>
          <a href="05_Ex_Unit_I_Solutions.html">Exercises With Solutions</a>
        </li>
      </ul>
    </li>
    <li class="divider"></li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Unit II</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="06_RNets.html">Random Networks</a>
        </li>
        <li>
          <a href="07_SFNets.html">Scale-Free Networks</a>
        </li>
        <li>
          <a href="08_PANets.html">Preferential Attachment Networks</a>
        </li>
        <li>
          <a href="09_NetModels.html">Modelling Networks in R</a>
        </li>
        <li>
          <a href="10_Ex_Unit_II_Solutions.html">Exercises With Solutions</a>
        </li>
      </ul>
    </li>
    <li class="divider"></li>
    <li>
      <a href="Midterm_Exam_-_Solutions.html">Midterm Exam</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Unit III</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="11_DegCorrel.html">Degree Correlation</a>
        </li>
        <li>
          <a href="12_Assortativity.html">Assortativity</a>
        </li>
        <li>
          <a href="13_ComNet.html">Introduction to Communities</a>
        </li>
        <li>
          <a href="14_MAAlg.html">Machine Learning Algorithms in R</a>
        </li>
        <li>
          <a href="15_Ex_Unit_III.html">Exercises</a>
        </li>
      </ul>
    </li>
    <li class="divider"></li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Unit IV</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="16_SprePhen.html">Spreading Phenomena</a>
        </li>
        <li>
          <a href="17_CEMod.html">Classical Epidemics Models</a>
        </li>
        <li>
          <a href="18_NetEpi.html">Network Epidemics</a>
        </li>
        <li>
          <a href="19_NetDif.html">Network Diffusion</a>
        </li>
        <li>
          <a href="20_Ex_Unit_IV.html">Exercises</a>
        </li>
      </ul>
    </li>
    <li class="divider"></li>
  </ul>
</li>
<li>
  <a href="IntroR.html">R Course</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Measures in Networks</h1>
<h4 class="author">Prof. Dr. Juanjo Manjarín</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#centrality-and-prestige"><span class="toc-section-number">1</span> Centrality and Prestige</a><ul>
<li><a href="#degree-centrality"><span class="toc-section-number">1.1</span> Degree Centrality</a></li>
<li><a href="#degree-prestige"><span class="toc-section-number">1.2</span> Degree Prestige</a></li>
<li><a href="#eigenvector-centrality"><span class="toc-section-number">1.3</span> Eigenvector Centrality</a></li>
<li><a href="#betweenness-centrality"><span class="toc-section-number">1.4</span> Betweenness Centrality</a></li>
<li><a href="#closeness-centrality"><span class="toc-section-number">1.5</span> Closeness Centrality</a></li>
<li><a href="#how-to-choose-among-centralitites"><span class="toc-section-number">1.6</span> How to Choose Among Centralitites</a></li>
</ul></li>
<li><a href="#transitivity-and-reciprocity"><span class="toc-section-number">2</span> Transitivity and Reciprocity</a><ul>
<li><a href="#clustering-coefficient"><span class="toc-section-number">2.1</span> Clustering Coefficient</a><ul>
<li><a href="#the-local-clustering-coefficient"><span class="toc-section-number">2.1.1</span> The Local Clustering Coefficient</a></li>
<li><a href="#the-global-clustering-coefficient"><span class="toc-section-number">2.1.2</span> The Global Clustering Coefficient</a></li>
</ul></li>
<li><a href="#reciprocity"><span class="toc-section-number">2.2</span> Reciprocity</a></li>
</ul></li>
</ul>
</div>

<hr />
<!-- centralities -->
<div id="centrality-and-prestige" class="section level1">
<h1><span class="header-section-number">1</span> Centrality and Prestige</h1>
<p>The identification of the most relevant nodes in a network is a basic task in any social network analysis. In this context there are too many different definitions that may be used each of them making a special emphasis on one property or another, however, whatever the definition all of them try to explain the <em>prominence</em> of an actor in a network due to its <em>location</em>.</p>
<p>There is, however, an important difference we should make between <strong>centrality</strong> and <strong>prestige</strong>:</p>
<ul>
<li><strong>Centrality</strong> is a measure on undirected graphs and the important notion is that <em>the actor is involved</em> in a link, then we consider number of ties or location bewteen nodes, for example.</li>
<li><strong>Prestige</strong> is a measure on digraphs, where we can make a difference between the incoming and outgoing links, then the important notion is <em>how is the actor involved</em> in a link (it is not the same the relation between follower and followee in social media, for example)</li>
</ul>
<p>Among the definitions we will discuss here we find the centralities</p>
<ul>
<li><strong>Degree</strong>: A local measure of the potential audience, denoted as <span class="math inline">\(C_d\)</span></li>
<li><strong>Eigenvector</strong>: A modification of degree centrality, denoted as <span class="math inline">\(C_e\)</span></li>
<li><strong>Betweenness</strong>: A non-local measure for information diffusion,, denoted as <span class="math inline">\(C_b\)</span></li>
<li><strong>Closeness</strong>: A non-local measure for influence, , denoted as <span class="math inline">\(C_c\)</span></li>
</ul>
<p>In the next sections, we are going to use the following graph</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-1-1.png" width="60%" style="display: block; margin: auto;" /></p>
<!-- degree -->
<div id="degree-centrality" class="section level2">
<h2><span class="header-section-number">1.1</span> Degree Centrality</h2>
<p>For undirected graphs, the <strong>degree centrality</strong> is just the degree of the node, i.e. the number of connections that the actor has. This is the most straightforward measure we can have in any network and denotes the <em>potential audience of the actor</em>.</p>
<p><span class="math display">\[\begin{equation}
C_d(v_i) = k_i = \sum_j A_{ij}
\end{equation}\]</span></p>
<p>Suppose an undirected social network as Facebook, the degree of one user is directly the number of friends she has. Of course, whenever she publishes anything, all her friends <em>have a chance</em> to see it in their news. Whether or not they interact with that publication is a complete different story, so this is not about gaining leads or any other KPI (Key Performance Index), it is just about how <strong>visible</strong> she is in the network.</p>
<p>The main problem with the measure as it is, is that it is order dependent, i.e. it depends on the number of actors in the networks. Therefore it is always better to find the standarized degree centrality. There is no unique standarization. Choices are: dividing by the maximum possible degree: <span class="math inline">\(N-1\)</span>, dividing by actual maximum degree: <span class="math inline">\(\text{max}_i(k_i)\)</span> or dividing by the sum of the degrees: <span class="math inline">\(2L\)</span>, so, taking the first option, for example, we have</p>
<p><span class="math display">\[\begin{equation}
C^s_d(v_i) = \frac{k_i}{N-1} = \frac{1}{N}\sum_j A_{ij}
\end{equation}\]</span></p>
<p>This is, in fact, the normalization factor that we can find in <code>igraph</code>. The function to find the degree is just <code>degree()</code>, the</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">degree</span>(g)</a></code></pre></div>
<pre><code>## 1 2 3 5 4 7 6 
## 3 4 3 2 3 2 3</code></pre>
<p>and the normalized degree is</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">degree</span>(g, <span class="dt">normalized =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##         1         2         3         5         4         7         6 
## 0.5000000 0.6666667 0.5000000 0.3333333 0.5000000 0.3333333 0.5000000</code></pre>
<p>using this values we can generate a plot of our graph using as size the degrees of the nodes</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-4-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p><a href="#">Back to top</a></p>
<!-- degree -->
</div>
<div id="degree-prestige" class="section level2">
<h2><span class="header-section-number">1.2</span> Degree Prestige</h2>
<p>Let’s now consider the following directed network</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-5-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>we can define two different concepts related to the indegree and to the outdegree. We are going to write directly the normalized expressions, then</p>
<ul>
<li><strong>Prestige</strong>, is the indegree</li>
</ul>
<p><span class="math display">\[\begin{equation}
P_d(v_i) = \frac{k_i^{in}}{N-1}
\end{equation}\]</span></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">degree</span>(gr, <span class="dt">mode =</span> <span class="st">&quot;in&quot;</span>, <span class="dt">normalized =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##  [1] 0.2222222 0.2222222 0.5555556 0.3333333 0.0000000 0.5555556 0.5555556
##  [8] 0.1111111 0.3333333 0.4444444</code></pre>
<ul>
<li><strong>Gregariousness</strong> is the outdegree</li>
</ul>
<p><span class="math display">\[\begin{equation}
G_d(v_i) = \frac{k_i^{out}}{N-1}
\end{equation}\]</span></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">degree</span>(gr, <span class="dt">mode =</span> <span class="st">&quot;out&quot;</span>, <span class="dt">normalized =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##  [1] 0.3333333 0.3333333 0.4444444 0.4444444 0.2222222 0.3333333 0.2222222
##  [8] 0.4444444 0.2222222 0.3333333</code></pre>
<p>See that in <code>igraph</code> we have just been explicit with the <code>mode</code> argument in the call of the function. Let’s plot both graphs using prestige and gregariousness as the size of the nodes</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-8-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>no surprise that the leading nodes in prestige do not neccesarilly coincide with those in gregariousness.</p>
<p><a href="#">Back to top</a></p>
<!-- eigenvector -->
</div>
<div id="eigenvector-centrality" class="section level2">
<h2><span class="header-section-number">1.3</span> Eigenvector Centrality</h2>
<p>In computing the degree centrality we did only consider that a node is important <em>just</em> because it has a large number of connections. However, this does not guarantee anything in real life. It is much better to consider the prominence of node in terms of how many important nodes it is connected to. This is precisely what the <strong>eigenvector centrality</strong> measures.</p>
<p>Since we want to keep track of the centralities of a node’s neighborhoods we propose the following definition</p>
<p><span class="math display">\[\begin{equation}
C_e(v_i) = \frac{1}{\lambda}\sum_{j = 1}^N A_{ij} \cdot C_e(v_j)
\end{equation}\]</span></p>
<p>for any fixed <span class="math inline">\(\lambda\)</span>, which just states that the centrality of a node is directly proportional to the sum of the centralitites of its neighborhood. If we write this equation for all the centralities of a network at one this read</p>
<p><span class="math display">\[\begin{equation}
\lambda \bf{C_e = A\cdot C_e}
\end{equation}\]</span></p>
<p>but this is nothing more than the characteristic equation for the eigenvector and eigvenvalues of the matrix A, hence the name eigenvector centrality.</p>
<p>We may come now to a problem: an <span class="math inline">\(N\times N\)</span> matrix can have <span class="math inline">\(N\)</span> different eigenvalues and eigenvectors (assuming that the multiplicity of each is one), so which of them should we choose? Here we may invoke Perron-Frobenius theorem to say that since we want all positive components in the eigenvector, we will always choose the <em>largest eigenvalue</em>.</p>
<p>Using <code>igraph</code> we have the <code>eigen_centrality()</code> function which can be directly used with the default options, then</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">eigens &lt;-<span class="st"> </span><span class="kw">eigen_centrality</span>(g)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">cat</span>(<span class="st">&quot;Eigenvalue:</span><span class="ch">\n</span><span class="st">&quot;</span>, eigens<span class="op">$</span>value, <span class="st">&quot;</span><span class="ch">\n\n</span><span class="st">Eigenvector:</span><span class="ch">\n</span><span class="st">&quot;</span>, eigens<span class="op">$</span>vector)</a></code></pre></div>
<pre><code>## Eigenvalue:
##  3.026666 
## 
## Eigenvector:
##  0.7417657 1 0.9115613 0.3976466 0.9115613 0.4617776 0.8474303</code></pre>
<p>we can use this centrality in the graph visualization as the sixe of the nodes, then (remember again, that the order of the nodes in the previous list is 1-2-3-5-4-7-6!!)</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-10-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>In social networks this measure is rather subtle since a person with a low number of connections could have a high eigenvector centrality if those few connections are very well-connected. Essentially, this centrality is a measure of <em>who you know, not of who you are</em>.</p>
<p>There are further refinements of this centrality, as Katz centrality or PageRank which are interesting but we will not see here. In any case we recommed to take a look at them and understand the differences and why they are used.</p>
<p><a href="#">Back to top</a></p>
<!-- betweenness -->
</div>
<div id="betweenness-centrality" class="section level2">
<h2><span class="header-section-number">1.4</span> Betweenness Centrality</h2>
<p>Let’s now look at the prominence of a node based on how it connects other nodes. The main point in this case is the consideration that a node is central if it lies between two other nodes. Of course, not any path is relevant in this case, only the geodesics are.</p>
<p>Under the assumption of equal weights and then, that any of the geodesics is equally likely to be chosen, we consider the probability that a given actor is involved in the communication between two other nodes. This probability is just a relative frequency:</p>
<p><span class="math display">\[\begin{equation}
\frac{\text{number of geodesics linking the nodes $i$ and $j$ going through the node $k$}}{\text{total number of geodesics linking the nodes $i$ and $j$}}
\end{equation}\]</span></p>
<p>then the betweenness is the sum extended to all the nodes of the network</p>
<p><span class="math display">\[\begin{equation}
C_b(v_k) = \sum_{v_i &lt; v_j}\frac{g_{ij}(v_k)}{g_{ij}}
\end{equation}\]</span></p>
<p>As usual we can perform a normalization. In this case we can divide by its maximum possible value: <span class="math inline">\((N-1)(N-2)\)</span>, then</p>
<p><span class="math display">\[\begin{equation}
C_b(v_k) = \frac{1}{(N-1)(N-2)}\sum_{v_i &lt; v_j}\frac{g_{ij}(v_k)}{g_{ij}}
\end{equation}\]</span></p>
<p>Take the node number <span class="math inline">\(5\)</span> in our network. It does not play any role but in th connection between nodes <span class="math inline">\(1\)</span> and <span class="math inline">\(7\)</span> and nodes <span class="math inline">\(6\)</span> and <span class="math inline">\(7\)</span>, then we can find the unnormalized betweenness as</p>
<p><span class="math display">\[\begin{equation}
C_b(v_5) = \frac{1}{2}_{v_1,v_7} + \frac{1}{4}_{v_6,v_7} = 0.75
\end{equation}\]</span></p>
<p>we can compute this in <code>igraph</code> using the <code>bewteenness()</code> function as</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">betweenness</span>(g, <span class="dt">directed =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##         1         2         3         5         4         7         6 
## 3.6666667 5.5833333 0.5833333 0.7500000 0.5833333 1.1666667 1.6666667</code></pre>
<p>from where we see that the result we found matches the one in <code>igraph</code>. However, in order to compare values across different networks, we should always find the normalized value, then</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">betweenness</span>(g, <span class="dt">directed =</span> <span class="ot">FALSE</span>, <span class="dt">normalized =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##          1          2          3          5          4          7 
## 0.24444444 0.37222222 0.03888889 0.05000000 0.03888889 0.07777778 
##          6 
## 0.11111111</code></pre>
<p>Let’s use this value to make the plot of our network with betweenness as the size</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-13-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Nodes with a high betweenness are the hidden forces in the network since they are not neccesarilly visible to the other nodes of the network, but diffusion processes need them to be efficient (or even to exist in some cases!)</p>
<p><a href="#">Back to top</a></p>
<!-- closeness -->
</div>
<div id="closeness-centrality" class="section level2">
<h2><span class="header-section-number">1.5</span> Closeness Centrality</h2>
<p>Let’s now look at the prominence of a node based on how close it is to other nodes. In this context, the notions of distance in the notework play a basic role. Note the main idea is that an actor is important if it can interact quickly with any other actors in the network.</p>
<p>We define <strong>closeness centrality</strong> as the inverse of the average shortest paths length beginning at the node</p>
<p><span class="math display">\[\begin{equation}
C_c(v_i) = \frac{1}{&lt;l_{i,j}&gt;}
\end{equation}\]</span></p>
<p>where the average shortest path length is</p>
<p><span class="math display">\[\begin{equation}
&lt;l_{i,j}&gt; = \frac{1}{N-1}\sum_{v_j\neq v_i} l_{i,j}
\end{equation}\]</span></p>
<p>In the graph we are using, taking, for example node 2 we have</p>
<p><span class="math display">\[\begin{equation}
C_c(v_2) = \frac{1}{(1+1+1+1+2+2)/(7-1)}= 0.75
\end{equation}\]</span></p>
<p>note that in <code>igraph</code> the division by <span class="math inline">\(N-1\)</span> in the average shortest path length is taken as an extra option of normalization, and by default it is not considered, then the proper computation is</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">closeness</span>(g, <span class="dt">normalized =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##         1         2         3         5         4         7         6 
## 0.6666667 0.7500000 0.6000000 0.5000000 0.6000000 0.5454545 0.6000000</code></pre>
<p>Let’s make the plot of the network using closeness as the size of the nodes</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-15-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p><a href="#">Back to top</a></p>
<!-- choosing centrality -->
</div>
<div id="how-to-choose-among-centralitites" class="section level2">
<h2><span class="header-section-number">1.6</span> How to Choose Among Centralitites</h2>
<p>The centralities we have seen are only a few of the, literally, hundreds of different centrality indices. However, these, together with <strong>harmonic closeness</strong>, <strong>PageRank</strong> and <strong>HITS</strong> are the common toolbox in Network Analysis.</p>
<p>It is obvious that the study should reveal which is the centrality to use on the other hand, if we study the correlations between the different centralities we may detect that they can be typically classified in two main groups, one of them having a subdivision</p>
<p><br></p>
<table>
<thead>
<tr class="header">
<th align="center">Group</th>
<th>Centralities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">I</td>
<td>Eigenvector, Harmonic Closeness, PageRank, Authorities</td>
</tr>
<tr class="even">
<td align="center">II.1</td>
<td>Degree, Betweenness</td>
</tr>
<tr class="odd">
<td align="center">II.2</td>
<td>Closeness, Hubs</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>We will see this more indepth once we study Assortativity. In any case, this means that if we choose one representative of each group, we would have a rightly described network from the perspective of centralities.</p>
<p><a href="#">Back to top</a></p>
</div>
</div>
<div id="transitivity-and-reciprocity" class="section level1">
<h1><span class="header-section-number">2</span> Transitivity and Reciprocity</h1>
<!-- clustering coefficient -->
<div id="clustering-coefficient" class="section level2">
<h2><span class="header-section-number">2.1</span> Clustering Coefficient</h2>
<p>The word <strong>clustering</strong> can be found in different contexts in network analysis, for example, as related to the hierarchical clustering detection of groups and communities. Note that this does not have anything to do with the actual use of the word, which denotes the tendency of a network nodes to form <strong>closed triads</strong>, in other words, closed triangles.</p>
<p>Clustering, then is just a measure of the <strong>transitivity</strong> in a network: <em>If A is friend of B and B is friend of C, then A is friend of C</em>.</p>
<!-- local lustering coefficient -->
<div id="the-local-clustering-coefficient" class="section level3">
<h3><span class="header-section-number">2.1.1</span> The Local Clustering Coefficient</h3>
<p>Locally, we can define the <strong>local clustering coefficient</strong> as</p>
<p><span class="math display">\[\begin{equation}
C_i = \frac{2L_i}{k_i(k_i-1)}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(L_i\)</span> is the number of links between the <span class="math inline">\(k_i\)</span> neighbords of node <span class="math inline">\(i\)</span>. Let’s take our network</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-16-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Let’s look at node-2. Its degree is 4 since it is connected to nodes 1,3 4 and 7. To look for <span class="math inline">\(L_2\)</span> we must now search for any possible link between any of those four nodes. It may be a good idea to explore the edge list, from where we see that only nodes 3 and 4 are connected, then we have <span class="math inline">\(L_2 = 1\)</span>, then</p>
<p><span class="math display">\[\begin{equation}
C_2 = \frac{2}{12} = 0.1667
\end{equation}\]</span></p>
<p>We can find all the local clustering coefficients in a network as</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">transitivity</span>(g, <span class="dt">type =</span> <span class="st">&quot;local&quot;</span>)</a></code></pre></div>
<pre><code>## [1] 0.0000000 0.1666667 0.6666667 0.0000000 0.6666667 0.0000000 0.3333333</code></pre>
<p>A related measure is the <strong>average clustering coefficient</strong>, defined as the average over the order of the network</p>
<p><span class="math display">\[\begin{equation}
&lt;C&gt; = \frac{1}{N}\sum_{i=1}^N C_i
\end{equation}\]</span></p>
<p>In R we can just find it using the <code>mean</code> on the local clustering coefficients</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">mean</span>(<span class="kw">transitivity</span>(g, <span class="dt">type =</span> <span class="st">&quot;local&quot;</span>))</a></code></pre></div>
<pre><code>## [1] 0.2619048</code></pre>
<p>If the network is weighted, we can use the <strong>weighted clustering coefficient</strong>, however, there is not a single unique definition of this quantity. The one used in <code>igraph</code> is Barrat’s definition (see the documentation) which can be found as follows</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">transitivity</span>(we_g, <span class="dt">type =</span> <span class="st">&quot;weighted&quot;</span>, <span class="dt">weights =</span> <span class="kw">E</span>(we_g)<span class="op">$</span>weight)</a></code></pre></div>
<pre><code>## [1] 0.0000000 0.1481481 0.7500000 0.0000000 0.6000000 0.0000000 0.4285714</code></pre>
<p>note the slight changes in the local coefficients. The average is again just the mean, then</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">mean</span>(<span class="kw">transitivity</span>(we_g, <span class="dt">type =</span> <span class="st">&quot;weighted&quot;</span>, <span class="dt">weights =</span> <span class="kw">E</span>(we_g)<span class="op">$</span>weight))</a></code></pre></div>
<pre><code>## [1] 0.2752457</code></pre>
<p>Finally, just a comment on digraphs: if we have a directed graph, the function turns it into a directed graph before finding the coefficients.</p>
<p><a href="#">Back to top</a></p>
<!-- global lustering coefficient -->
</div>
<div id="the-global-clustering-coefficient" class="section level3">
<h3><span class="header-section-number">2.1.2</span> The Global Clustering Coefficient</h3>
<p>In this case we are dealing with what is usually known as the <strong>ratio of transitive triplets</strong>, and so that is exactly what it measuring</p>
<p><span class="math display">\[\begin{equation}
C_{\Delta} = \frac{3 \times \text{Number of Closed Triads}}{\text{Number of Triads}}
\end{equation}\]</span></p>
<p>the only <em>strange</em> thing with this formula is the factor of 3, which comes from the fact that we are counting each triangle three times in the triads count and so, must be compensated.</p>
<p>In our graph we can see that</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">transitivity</span>(g, <span class="dt">type =</span> <span class="st">&quot;global&quot;</span>)</a></code></pre></div>
<pre><code>## [1] 0.3</code></pre>
<p>so it is not the average local, but it is certainly very close to it.</p>
<p><a href="#">Back to top</a></p>
</div>
</div>
<div id="reciprocity" class="section level2">
<h2><span class="header-section-number">2.2</span> Reciprocity</h2>
<p>Just as transitivity is a triad’s property, <strong>reciprocity</strong> is a dyad’s one. The idea is <em>you are my friend and I am yours</em>. Formally we can see this as counting for closed loops of length two in a digraph (in undirected graphs this property makes no sense). Then, using the adjacency matrix we count for the elements in the diagonal of its second power</p>
<p><span class="math display">\[\begin{equation}
R = \frac{1}{L}\text{Tr}\left( A^2\right)
\end{equation}\]</span></p>
<p>where we divide by the number of links in the network as a normalization factor.</p>
<p>In R we can directly use the formula above, but in <code>igraph</code> we also have the <code>reciprocity()</code> function, let’s define a graph with some mutual connections and use it</p>
<p><img src="03_Measures_files/figure-html/unnamed-chunk-22-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>this graph has 3 mutual connections and 11 edges. Then the reciprocity would just be 6/11, let’s use the function</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">reciprocity</span>(rec_gr)</a></code></pre></div>
<pre><code>## [1] 0.5454545</code></pre>
<p><a href="#">Back to top</a></p>
</div>
</div>

<footer>
  <div id="rbmvFooter" class="footer">
    <div class="footerContent">
    
    <p>Copyright &copy; 2020 Juanjo Manjarín, IE University. All rights reserved.</p>
    
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
